<!DOCTYPE html>

<html ng-app="garconApp">

<head>
    <meta charset="utf-8">
    <title>Cardápio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="css/estilo.css">
</head>

<body ng-controler="CadastrosController">
    <header>
        <div ng-include="'MenuNavBar.html'"></div>
    </header>
    <div  class="container">
        <div class="row">
            <form class="col s12">
                <div class="row">
                    <div class="input-field col s4">
                        <label for="codigo">Código</label>
                        <input placeholder="Código" id="codigo" type="number" class="validate" ng-model=" Garcon.codigo" />
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s10">
                        <label for="nome">Nome</label>
                        <input placeholder="Nome" id="nome" name="nome" type="text" class="validate"  ng-model=" Garcon.nome" />
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s10">
                        <label for="telefone">Telefone</label>
                        <input placeholder="Telefone" id="telefone" name="telefone" type="text" class="validate"  ng-model=" Garcon.telefone" />
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s10">
                        <label for="Endereco">Endereço</label>
                        <input placeholder="Endereço" id="Endereco" name="Endereco" type="text" ng-model=" Garcon.endereco" />
                    </div>
                </div>
                <button class="btn waves-effect waves-light" type="submit" name="action" ng-click="Salvar(Garcon)">Salvar
                    <i class="material-icons left">check</i>
                </button>
                <button class="btn waves-effect waves-light red" type="submit" name="action" ng-click="cancelar() ">Cancelar
                    <i class="material-icons left">clear</i>
                </button>
            </form>
        </div>
    </div>

    <h3>Cadastros</h3>
    <table class="responsive-table">
        <thead>
            <tr>
                <th>Codigo</th>
                <th>Nome</th>
                <th>Telefone</th>
                <th>Endereco</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="Garcon in cadastros track by $Index">
                <td>{{Garcon.Codigo}}</td>
                <td>{{Garcon.nome}}</td>
                <td>{{Garcon.telefone}}</td>
                <td>{{Garcon.endereco}}</td>
                <td><a href="" ng-click="editar(cadastros)">[Editar]</a></td>
                <td><a href="" ng-click="excluir(cadastros)">[Excluir]</a></td>
            </tr>
        </tbody>

    </table>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script language="JavaScript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script language="JavaScript" type="text/javascript" src='js/angular.min.js'></script>
    <script language="JavaScript" type="text/javascript" src='js/script.js'></script>

    <script>
        var app = angular.module('garconApp', []);
        app.controller('cadastrosControler', function($scope) {
            var Garcon = [];
            $scope.Garcon = {};

            $scope.cadastros = cadastros;

            $scope.salvar = function(Garcon) {
                var cadastroEncontrado = false;
                for (var i = 0, length = cadastros.length; i < length; i++) {
                    if (cadastros[i].codigo == Garcon.codigo) {
                        cadastros[i].nome = Garcon.nome;
                        cadastros[i].telefone = Garcon.telefone;
                        cadastros[i].endereco = Garcon.endereco;
                        cadastroEncontrado = true;
                        break;

                    }

                }
                if (!cadastroEncontrado) {
                    cadastros.push(Garcon);
                }
                $scope.Garcon = {};
            };

            $scope.editar = function(Garcon) {
                $scope.Garcon = angular.copy(Garcon);
            };



            $scope.excluir = function(Garcon) {
                for (var i = 0, length = cadastros.length; i < length; i++) {
                    if (cadastros[i].id == Garcon.id) {
                        cadastros.splice(i, 1);
                    }
                }
            };
            $scope.cancelar = function() {
                $scope.Garcon = {};
            }

        });
    </script>
</body>
<footer class="page-footer">
    <div class="footer-copyright">
        <div class="container">
            © 2021 Copyright Cleiton e Edilson Ltda
        </div>
    </div>
</footer>

</html>